!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@wangeditor/editor")):"function"==typeof define&&define.amd?define(["@wangeditor/editor"],t):"object"==typeof exports?exports.WangEditorPluginMention=t(require("@wangeditor/editor")):e.WangEditorPluginMention=t(e.wangEditor)}(self,(function(e){return function(){"use strict";var t={907:function(t){t.exports=e}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return function(){o.r(i),o.d(i,{default:function(){return l}});var e=o(907);function t(e,t,n,o,i){return{sel:e,data:t,children:n,text:o,elm:i,key:void 0===t?void 0:t.key}}const n=Array.isArray;function r(e){return"string"==typeof e||"number"==typeof e||e instanceof String||e instanceof Number}function a(e,t,n){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==t)for(let e=0;e<t.length;++e){const n=t[e];if("string"==typeof n)continue;const o=n.data;void 0!==o&&a(o,n.children,n.sel)}}function d(e,o,i){let d,l,c,u={};if(void 0!==i?(null!==o&&(u=o),n(i)?d=i:r(i)?l=i.toString():i&&i.sel&&(d=[i])):null!=o&&(n(o)?d=o:r(o)?l=o.toString():o&&o.sel?d=[o]:u=o),void 0!==d)for(c=0;c<d.length;++c)r(d[c])&&(d[c]=t(void 0,void 0,void 0,d[c],void 0));return!e.startsWith("svg")||3!==e.length&&"."!==e[3]&&"#"!==e[3]||a(u,d,e),t(e,u,d,l,void 0)}var l={editorPlugin:function(t){var n=t.insertText,o=t.isInline,i=t.isVoid,r=t;return r.insertText=function(t){if(e.DomEditor.getSelectedElems(r).some((function(e){return r.isVoid(e)})))n(t);else{var o=function(e){return e.getConfig().EXTEND_CONF.mentionConfig}(r),i=o.showModal,a=o.hideModal;"@"===t&&setTimeout((function(){i&&i(r),setTimeout((function(){function e(){a&&a(r)}r.once("fullScreen",e),r.once("unFullScreen",e),r.once("scroll",e),r.once("modalOrPanelShow",e),r.once("modalOrPanelHide",e),r.on("change",(function t(){null!=r.selection&&(e(),r.off("change",t))}))}))})),n(t)}},r.isInline=function(t){return"mention"===e.DomEditor.getNodeType(t)||o(t)},r.isVoid=function(t){return"mention"===e.DomEditor.getNodeType(t)||i(t)},r},renderElems:[{type:"mention",renderElem:function(t,n,o){var i=e.DomEditor.isNodeSelected(o,t),r=t.info;return console.log("info",r),d("span",{props:{contentEditable:!1,id:r.id},style:{marginLeft:"3px",marginRight:"3px",backgroundColor:"var(--w-e-textarea-slight-bg-color)",border:i?"2px solid var(--w-e-textarea-selected-border-color)":"2px solid transparent",borderRadius:"3px",padding:"0 3px",width:"14px",height:"14px",cursor:"pointer"}},[d("img",{src:r.avatar,style:{"border-radius":"50%",width:"12px",height:"12px","margin-right":"2px",position:"relative",top:"-2px"},dataset:{id:r.id}}),"".concat(r.name)])}}],elemsToHtml:[{type:"mention",elemToHtml:function(e,t){var n=e,o=n.value,i=void 0===o?"":o,r=n.info,a=void 0===r?{}:r,d=encodeURIComponent(JSON.stringify(a));return'<span data-w-e-type="mention" data-w-e-is-void data-w-e-is-inline data-value="'.concat(i,'" data-info="').concat(d,'">@').concat(i,"</span>")}}],parseElemsHtml:[{selector:'span[data-w-e-type="mention"]',parseElemHtml:function(e,t,n){var o,i=e.getAttribute("data-value")||"",r=decodeURIComponent(e.getAttribute("data-info")||"");try{o=JSON.parse(r)}catch(e){o=r}return{type:"mention",value:i,info:o,children:[{text:""}]}}}]}}(),i}()}));
//# sourceMappingURL=index.js.map